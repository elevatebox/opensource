<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coadmin Interface - Grant.it</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #ffecb3; /* Peach background */
            color: #333;
        }

        .header {
            text-align: center;
            padding: 20px;
            background-color: #ffb74d; /* Bright orange */
            border-radius: 8px;
        }

        h1 {
            color: #e65100; /* Darker orange */
        }

        .request-table {
            margin-top: 20px;
            border-radius: 8px;
            overflow: hidden;
        }

        .approve-btn {
            background-color: #4caf50; /* Green */
            color: white;
        }

        .reject-btn {
            background-color: #f44336; /* Red */
            color: white;
        }

        .add-student-form {
            margin: 20px 0;
        }
    </style>
</head>

<body>
    <div class="header">
        <h1>Coadmin Interface</h1>
        <p>Manage Student Requests</p>
    </div>

    <div class="container mt-4">
        <h2>Pending Requests</h2>
        <table class="table table-striped request-table">
            <thead>
                <tr>
                    <th>Student Name</th>
                    <th>Request Details</th>
                    <th>Status</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody id="request-list">
                <!-- Requests will be populated here -->
            </tbody>
        </table>

        <h2>Manage Students</h2>
        <div class="add-student-form">
            <form id="student-form" onsubmit="addStudent(event)">
                <div class="mb-3">
                    <label for="student-name" class="form-label">Student Name</label>
                    <input type="text" class="form-control" id="student-name" required>
                </div>
                <div class="mb-3">
                    <label for="student-branch" class="form-label">Branch</label>
                    <select class="form-select" id="student-branch" required>
                        <option value="" disabled selected>Select a branch</option>
                        <option value="Computer Science">Computer Science</option>
                        <option value="Mechanical Engineering">Mechanical Engineering</option>
                        <option value="Electrical Engineering">Electrical Engineering</option>
                        <option value="Civil Engineering">Civil Engineering</option>
                        <option value="Information Technology">Information Technology</option>
                        <option value="Electronics and Communication">Electronics and Communication</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-primary">Add Student</button>
            </form>
        </div>

        <table class="table table-striped request-table">
            <thead>
                <tr>
                    <th>Student Name</th>
                    <th>Branch</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody id="student-list">
                <!-- Dynamically added students will appear here -->
            </tbody>
        </table>
    </div>

    <script>
        const students = [];

        function addStudent(event) {
            event.preventDefault();
            const name = document.getElementById('student-name').value;
            const branch = document.getElementById('student-branch').value;

            const student = { id: Date.now(), name, branch };
            students.push(student);
            displayStudents();
            document.getElementById('student-form').reset();
        }

        function displayStudents() {
            const studentList = document.getElementById('student-list');
            studentList.innerHTML = '';
            students.forEach(student => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${student.name}</td>
                    <td>${student.branch}</td>
                    <td>
                        <button class="btn btn-warning" onclick="editStudent(${student.id})">Edit</button>
                        <button class="btn btn-danger" onclick="removeStudent(${student.id})">Remove</button>
                    </td>
                `;
                studentList.appendChild(row);
            });
        }

        function approveRequest(button) {
            const row = button.closest("tr");
            const statusCell = row.cells[2];
            statusCell.textContent = "Approved";
            button.disabled = true; // Disable approve button
            button.classList.add('btn-secondary'); // Change button color
            button.textContent = "Approved"; // Change button text

            // Update localStorage to persist the approved status
            const requests = JSON.parse(localStorage.getItem('studentRequests')) || [];
            const index = requests.findIndex(req => req.subject === row.cells[0].textContent);
            if (index !== -1) {
                requests[index].status = "Approved";
                localStorage.setItem('studentRequests', JSON.stringify(requests));
            }
        }

        function rejectRequest(button) {
            const row = button.closest("tr");
            const statusCell = row.cells[2];
            statusCell.textContent = "Rejected";
            button.disabled = true; // Disable reject button
            button.classList.add('btn-secondary'); // Change button color
            button.textContent = "Rejected"; // Change button text

            // Update localStorage to persist the rejected status
            const requests = JSON.parse(localStorage.getItem('studentRequests')) || [];
            const index = requests.findIndex(req => req.subject === row.cells[0].textContent);
            if (index !== -1) {
                requests[index].status = "Rejected";
                localStorage.setItem('studentRequests', JSON.stringify(requests));
            }
        }

        function displayRequests() {
            const requests = JSON.parse(localStorage.getItem('studentRequests')) || [];
            const requestList = document.getElementById('request-list');
            requestList.innerHTML = '';

            requests.forEach(request => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${request.subject}</td>
                    <td>${request.details}</td>
                    <td>${request.status}</td>
                    <td>
                        <button class="btn approve-btn" onclick="approveRequest(this)">Approve</button>
                        <button class="btn reject-btn" onclick="rejectRequest(this)">Reject</button>
                    </td>
                `;
                requestList.appendChild(row);
            });
        }

        window.onload = function() {
            displayRequests(); // Display requests on coadmin page load
        };
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>
